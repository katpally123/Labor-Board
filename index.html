<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>CRETs Labor Board</title>
  <link rel="stylesheet" href="styles.css"/>
  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>
  <!-- Header -->
  <header class="hdr">
    <div class="hdr-left">
      <div class="brand">CRETs Labor Board</div>
      <div class="controls">
        <label class="ctrl">
          <span>Date</span>
          <input id="datePick" type="date">
        </label>
        <label class="ctrl">
          <span>Shift</span>
          <select id="shiftType">
            <option value="Day">Day</option>
            <option value="Night">Night</option>
          </select>
        </label>
      </div>
    </div>

    <div class="hdr-center">
      <div class="kpi"><span>Planned</span><strong id="kpiPlanned">0</strong></div>
      <div class="kpi"><span>Actual</span><strong id="kpiActual">0</strong></div>
      <div class="kpi"><span>Variance</span><strong id="kpiVariance">0</strong></div>
      <div class="kpi"><span>Late</span><strong id="kpiLate">0</strong></div>
    </div>

    <div class="hdr-right">
      <input id="search" class="search" type="search" placeholder="Find associate (F3)">
      <button id="zoomMinus" class="btn">−</button>
      <button id="zoomPlus"  class="btn">+</button>
      <button id="reset"     class="btn btn-ghost">Reset</button>
      <button id="exportLog" class="btn btn-primary">Export Log</button>
    </div>
  </header>

  <!-- Uploads -->
  <section class="uploads card">
    <div class="row row-head" style="grid-template-columns: repeat(5, 1fr)">
      <div>
        <label class="lbl">Roster (required)</label>
        <input type="file" id="fileRoster" accept=".csv">
        <div class="file-hint" id="hintRoster">No file chosen</div>
      </div>

      <div>
        <label class="lbl">Swap OUT (Approved)</label>
        <input type="file" id="fileSwapOut" accept=".csv">
        <div class="file-hint" id="hintSwapOut">No file chosen</div>
      </div>

      <div>
        <label class="lbl">Swap IN (Approved)</label>
        <input type="file" id="fileSwapIn" accept=".csv">
        <div class="file-hint" id="hintSwapIn">No file chosen</div>
      </div>

      <div>
        <label class="lbl">VET / VTO (Accepted)</label>
        <input type="file" id="fileVetVto" accept=".csv">
        <div class="file-hint" id="hintVetVto">No file chosen</div>
      </div>

      <div>
        <label class="lbl">Labor Share (LS)</label>
        <input type="file" id="fileLaborShare" accept=".csv">
        <div class="file-hint" id="hintLaborShare">No file chosen</div>
      </div>
    </div>

    <div class="row row-actions">
      <div class="codes">
        <div class="lbl">Shift codes today</div>
        <div id="codesToday" class="codes-pill">—</div>
      </div>
      <div class="upload-actions">
        <button id="buildNow" class="btn btn-primary">Rebuild Now</button>
        <button id="resetFiles" class="btn btn-ghost">Reset files</button>
      </div>
    </div>
    <div class="tiny-note">Files are parsed locally in your browser. Nothing is uploaded.</div>
  </section>

  <!-- Whiteboard -->
  <main class="whiteboard">
    <aside class="rail card">
      <h3>Unassigned <small><span id="unPlanned">0</span>/<span id="unActual">0</span></small></h3>
      <div id="UNASSIGNED" class="well unassigned"></div>

      <div class="legend">
        <div class="item"><i class="dot vet"></i>VET (accepted)</div>
        <div class="item"><i class="dot vto"></i>VTO (accepted)</div>
        <div class="item"><i class="dot swapin"></i>Swap IN</div>
        <div class="item"><i class="dot swapout"></i>Swap OUT</div>
        <div class="item"><i class="dot break"></i>Break</div>
        <div class="item"><i class="dot train"></i>Training</div>
      </div>
    </aside>

    <section id="BOARD" class="board"></section>

    <aside class="rail card">
      <h3>Live Log</h3>
      <div id="LOG" class="log"></div>
    </aside>
  </main>

  <footer class="ftr">
    Flip = Present • Drag to move • Right-click to toggle break • F3 to search • Zoom ±
  </footer>
</body>
</html>
